{% extends 'mainapp/base.html' %}
{% block title %}{{ property.title }}{% endblock %}

{% block content %}
<!-- Property Info -->
<div style="max-width:800px; margin:2rem auto; padding:2rem; background:#f8f8f8; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.1); text-align:center;">
  <h2 style="color:#8B4513;">{{ property.title }}</h2>
<div>  
  <img src="{{ property.image_main.url }}" style="width:50%; border-radius:8px; margin-bottom:1rem;" alt="{{ property.title }}" />
  {% if not property.is_available %}
    <div style="
      position: absolute;
      top: 10px;
      left: 10px;
      background: red;
      color: white;
      padding: 5px 10px;
      font-weight: bold;
      border-radius: 5px;
    ">
      SOLD
    </div>
  {% endif %}
</div>
  <p style="margin-bottom:1rem;">{{ property.description }}</p>
  <p style="margin-bottom:1.5rem;">Price: ${{ property.price }}</p>

  <!-- Add to Favorites Form -->
  <form action="{% url 'add_to_favorites' property.pk %}" method="post" style="display:inline-block; margin-right:0.5rem;">
    {% csrf_token %}
    <button type="submit" style="padding:0.7rem 1.5rem; background:#3b7dd8; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold;">
      Add to Favorites
    </button>
  </form>
</div>

<!-- Report Issue Section -->
<div style="max-width:800px; margin:2rem auto; padding:2rem; background:#fff5f5; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.1); text-align:center;">
  <button onclick="toggleVisibility('report-form')"  style="padding: 0.7rem 1.5rem; background: #ff4c4c; color: white; border-radius: 8px; font-weight: bold;">Report this property
  </button>
  <div id="report-form" style="display: none; margin-top: 1rem;">
  <form action="{% url 'report_issue' property.pk %}" method="post" style="text-align:left;">
    {% csrf_token %}
    <textarea name="reason" placeholder="Why are you reporting this property?" required
              style="width:100%; padding:0.7rem; min-height:120px; border-radius:8px; border:1px solid #ccc; font-size:1rem; margin-bottom:1rem;"></textarea>
    <button type="submit"
            style="padding:0.7rem 1.5rem; background:#ff4c4c; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold;">Submit Report</button>
  </form>
  </div>
</div>

<!-- Message Seller Section -->
<div style="max-width:800px; margin:2rem auto; padding:2rem; background:#ffffff; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.1); text-align:center;">
  <button onclick="toggleVisibility('message-form')"  style="padding: 0.7rem 1.5rem; background: #8B4513; color: white; border-radius: 8px; font-weight: bold;">contact seller
  </button>
  <div id="message-form" style="display: none; margin-top: 1rem;">
  <form action="{% url 'send_message' property.pk %}" method="post" style="text-align:left;">
    {% csrf_token %}
    <textarea name="message" placeholder="Write your message here..." required
              style="width:100%; padding:0.7rem; min-height:120px; border-radius:8px; border:1px solid #ccc; font-size:1rem; margin-bottom:1rem;"></textarea>
    <button type="submit"
            style="padding:0.7rem 1.5rem; background:#8B4513; color:white; border:none; border-radius:8px; cursor:pointer; font-weight:bold;">Send Message</button>
  </form>
  </div>
</div>
{% endblock %}
